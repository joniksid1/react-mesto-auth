/*! For license information please see main.4a58923a.chunk.js.LICENSE.txt */
(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{10:function(e,t,n){},13:function(e,t,n){e.exports=n.p+"static/media/header-logo.4e5bdbab.svg"},14:function(e,t,n){e.exports=n.p+"static/media/sucsess.e05e43ff.svg"},15:function(e,t,n){e.exports=n.p+"static/media/fail.2d9b7bec.svg"},18:function(e,t,n){e.exports=n(27)},27:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),i=n.n(o),c=(n(10),n(16)),l=n(12),s=n(2),u=n(1),p=n(13),m=n.n(p),_=n(4);var f=function(e){var t=e.email,n=e.onSignOut;return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:m.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u043c\u0435\u0441\u0442\u043e, \u0420\u043e\u0441\u0441\u0438\u044f",className:"header__logo"}),r.a.createElement("div",{className:"header__wrapper"},t&&r.a.createElement("p",{className:"header__email"},t),r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/sign-up",element:r.a.createElement(_.b,{to:"/sign-in",className:"header__link"},"\u0412\u043e\u0439\u0442\u0438")}),r.a.createElement(u.b,{path:"/sign-in",element:r.a.createElement(_.b,{to:"/sign-up",className:"header__link"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")}),r.a.createElement(u.b,{path:"/",element:r.a.createElement(_.b,{to:"/sign-in",className:"header__link",onClick:n},"\u0412\u044b\u0439\u0442\u0438")}))))},h=r.a.createContext();var d=function(e){var t=e.card,n=e.onCardClick,a=e.onCardLike,o=e.onDeletePopup,i=e.onSelectDeleteCard,c=e.onImageOpen,l=r.a.useContext(h),s=t.owner._id===l._id,u=t.likes.some((function(e){return e._id===l._id})),p="elements__heart ".concat(u&&"elements__heart_active");return r.a.createElement("li",{className:"elements__list-item"},r.a.createElement("img",{alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0435",className:"elements__image",src:t.link,onClick:function(){n(t),c()}}),s&&r.a.createElement("button",{className:"elements__delete",onClick:function(){o(),i(t)}}),r.a.createElement("div",{className:"elements__caption"},r.a.createElement("h2",{className:"elements__title"},t.name),r.a.createElement("div",{className:"elements__like-wrapper"},r.a.createElement("button",{className:p,onClick:function(){a(t)},type:"button"}),r.a.createElement("p",{className:"elements__like-counter"},t.likes.length))))},v=r.a.createContext();var g=function(e){var t=e.onEditProfile,n=e.onAddPlace,a=e.onEditAvatar,o=e.onDeletePopup,i=e.onSelectDeleteCard,c=e.onImageOpen,l=e.onCardClick,s=e.onCardLike,u=r.a.useContext(h),p=u.name,m=u.about,_=u.avatar,f=r.a.useContext(v);return r.a.createElement("main",{className:"main"},r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__image-overlay"},r.a.createElement("img",{src:_,alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",className:"profile__image",onClick:a})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("h1",{className:"profile__title","aria-label":"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"},p),r.a.createElement("button",{className:"profile__edit-button",type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",onClick:t}),r.a.createElement("p",{className:"profile__caption"},m)),r.a.createElement("button",{className:"profile__add-button",type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",onClick:n})),r.a.createElement("section",{className:"elements","aria-label":"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u043c\u0435\u0441\u0442 \u0420\u043e\u0441\u0441\u0438\u0438"},r.a.createElement("ul",{className:"elements__list"},f.map((function(e){return r.a.createElement(d,{card:e,onCardClick:l,onCardLike:s,onCardDelete:o,onSelectDeleteCard:i,onDeletePopup:o,onImageOpen:c,key:e._id})})))))};var y=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2023 \u041a\u0443\u0437\u043d\u0435\u0446\u043e\u0432 \u041c\u0438\u0445\u0430\u0438\u043b"))};var E=function(e){var t=e.card,n=e.onClose,a=e.onOverlayClick;return r.a.createElement("div",{className:"popup image-popup ".concat(t.link?"popup_opened":""),onClick:a},r.a.createElement("figure",{className:"image-popup__figure"},r.a.createElement("button",{className:"popup__close-button image-popup__close-button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:n}),r.a.createElement("img",{src:t.link,alt:t.name,className:"image-popup__image"}),r.a.createElement("figcaption",{className:"image-popup__caption"},t.name)))},b=n(7),O=n(8),C={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inputErrorSelector:".popup__input-error_type_",inputErrorFrameClass:"popup__input_error-frame"},k={},N=new(function(){function e(t){var n=t.url,a=t.headers;Object(b.a)(this,e),this._url=n,this._headers=a}return Object(O.a)(e,[{key:"_getRequest",value:function(e,t){return fetch(e,t).then((function(e){return e.ok?e.json():e.json().then((function(t){var n=t.message||"Request failed",a=new Error(n);throw a.status=e.status,a}))}))}},{key:"getUserInfo",value:function(){return this._getRequest("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers})}},{key:"setUserInfo",value:function(e){return this._getRequest("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})})}},{key:"changeAvatar",value:function(e){var t=e.avatar;return this._getRequest("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})})}},{key:"getInitialCards",value:function(){return this._getRequest("".concat(this._url,"/cards"),{method:"GET",headers:this._headers})}},{key:"createCard",value:function(e){return this._getRequest("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)})}},{key:"deleteCard",value:function(e){return this._getRequest("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers})}},{key:"setlike",value:function(e,t){return t?this._getRequest("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}):this._getRequest("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers})}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-76",headers:{authorization:"879fc354-cfc1-42a1-b8be-cb6ca897d345","Content-Type":"application/json"}});var w=function(e){var t=e.name,n=e.title,a=e.button,o=e.children,i=e.isOpen,c=e.onClose,l=e.onSubmit,s=e.onLoading,u=e.onOverlayClick;return r.a.createElement("div",{className:"popup ".concat(i?"popup_opened":""),onClick:u},r.a.createElement("div",{className:"popup__container ".concat(t,"-popup__container")},r.a.createElement("button",{className:"popup__close-button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:c}),r.a.createElement("h2",{className:"popup__title"},n),r.a.createElement("form",{name:t,className:"popup__form ".concat(t,"-popup__form"),onSubmit:l,noValidate:!0},o,r.a.createElement("button",{className:"popup__button ".concat(t,"-popup__button"),type:"submit"},s?"C\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":a||"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))};var S=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,o=e.onLoading,i=e.onOverlayClick,c=r.a.useContext(h),l=r.a.useState(""),u=Object(s.a)(l,2),p=u[0],m=u[1],_=r.a.useState(""),f=Object(s.a)(_,2),d=f[0],v=f[1];return r.a.useEffect((function(){c&&(m(c.name),v(c.about))}),[c,t]),r.a.createElement(w,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onLoading:o,onSubmit:function(e){e.preventDefault(),a({name:p,about:d})},onOverlayClick:i},r.a.createElement("div",{className:"popup__form-wrapper"},r.a.createElement("input",{name:"name",minLength:2,maxLength:40,type:"text",id:"nameInput",className:"popup__input popup__input_type_name",required:"",value:null!==p&&void 0!==p?p:"",onChange:function(e){m(e.target.value)}}),r.a.createElement("span",{className:"popup__input-error popup__input-error_type_name",id:"nameInput-error"})),r.a.createElement("div",{className:"popup__form-wrapper"},r.a.createElement("input",{name:"job",minLength:2,maxLength:200,type:"text",id:"about",className:"popup__input popup__input_type_job",required:"",value:null!==d&&void 0!==d?d:"",onChange:function(e){v(e.target.value)}}),r.a.createElement("span",{className:"popup__input-error popup__input-error_type_job",id:"about-error"})))};var j=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateAvatar,o=e.onLoading,i=e.onOverlayClick,c=r.a.useRef();return r.a.useEffect((function(){t&&(c.current.value="")}),[t]),r.a.createElement(w,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onLoading:o,onSubmit:function(e){e.preventDefault(),a({avatar:c.current.value})},onOverlayClick:i},r.a.createElement("div",{className:"popup__form-wrapper"},r.a.createElement("input",{name:"avatar-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",type:"url",id:"avatar-link",className:"popup__input popup__input_type_link",required:"",ref:c}),r.a.createElement("span",{className:"popup__input-error popup__input-error_type_avatar-link",id:"avatar-link-error"})))};var L=function(e){var t=e.isOpen,n=e.onClose,a=e.onAddCard,o=e.onLoading,i=e.onOverlayClick,c=r.a.useState(""),l=Object(s.a)(c,2),u=l[0],p=l[1],m=r.a.useState(""),_=Object(s.a)(m,2),f=_[0],h=_[1];return r.a.useEffect((function(){t&&(p(""),h(""))}),[t]),r.a.createElement(w,{name:"add",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",button:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:n,onLoading:o,onSubmit:function(e){e.preventDefault(),a({name:u,link:f})},onOverlayClick:i},r.a.createElement("div",{className:"popup__form-wrapper"},r.a.createElement("input",{name:"place",minLength:2,maxLength:30,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",type:"text",id:"name",className:"popup__input popup__input_type_place",required:"",value:null!==u&&void 0!==u?u:"",onChange:function(e){p(e.target.value)}}),r.a.createElement("span",{className:"popup__input-error popup__input-error_type_place",id:"name-error"})),r.a.createElement("div",{className:"popup__form-wrapper"},r.a.createElement("input",{name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",type:"url",id:"link",className:"popup__input popup__input_type_link",required:"",value:null!==f&&void 0!==f?f:"",onChange:function(e){h(e.target.value)}}),r.a.createElement("span",{className:"popup__input-error popup__input-error_type_link",id:"link-error"})))};var x=function(e){var t=e.isOpen,n=e.onClose,a=e.onDeleteCard,o=e.card,i=e.onLoading,c=e.onOverlayClick;return r.a.createElement(w,{name:"delete",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",button:"\u0414\u0430",isOpen:t,onClose:n,onLoading:i,onSubmit:function(e){e.preventDefault(),a(o)},onOverlayClick:c})},I=n(17),P=["element"],q=function(e){var t=e.element,n=Object(I.a)(e,P);return n.loggedIn?r.a.createElement(t,n):r.a.createElement(u.a,{to:"/sign-in",replace:!0})},A=n(14),T=n.n(A),D=n(15),F=n.n(D);var R=function(e){var t=e.isSucsessed,n=e.isOpen,a=e.onClose,o=e.onOverlayClick;return r.a.createElement("div",{className:"popup ".concat(n?"popup_opened":""),onClick:o},r.a.createElement("div",{className:"popup__container"},r.a.createElement("button",{className:"popup__close-button image-popup__close-button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:a}),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:T.a,alt:"\u0418\u043a\u043e\u043d\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0439 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",className:"popup__image"}),r.a.createElement("p",{className:"popup__caption"},"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e","\n","\u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!")),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:F.a,alt:"\u041a\u0440\u0430\u0441\u043d\u044b\u0439 \u043a\u0440\u0435\u0441\u0442",className:"popup__image"}),r.a.createElement("p",{className:"popup__caption"},"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!","\n","\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."))))},B=function(e){var t=e.onRegister,n=e.isSucsessed,a=e.isOpen,o=e.onClose,i=e.onOverlayClick,c=r.a.useState(""),l=Object(s.a)(c,2),u=l[0],p=l[1],m=r.a.useState(""),f=Object(s.a)(m,2),h=f[0],d=f[1];return r.a.createElement("div",{className:"register"},r.a.createElement("h1",{className:"register__title"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("form",{className:"register__form"},r.a.createElement("div",{className:"register__wrapper register__wrapper_type_input"},r.a.createElement("input",{name:"email",type:"email",placeholder:"Email",className:"register__input register__input_type_email",required:"",value:null!==u&&void 0!==u?u:"",onChange:function(e){p(e.target.value)}}),r.a.createElement("span",{className:"register__input-error register__input-error_type_email"})),r.a.createElement("div",{className:"register__wrapper register__wrapper_type_input"},r.a.createElement("input",{name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"register__input register__input_type_password",required:"",value:null!==h&&void 0!==h?h:"",onChange:function(e){d(e.target.value)}}),r.a.createElement("span",{className:"register__input-error register__input-error_type_password"})),r.a.createElement("div",{className:"register__wrapper register__wrapper_type_button"},r.a.createElement("button",{className:"register__button",type:"submit",onClick:function(e){e.preventDefault(),t(h,u)}},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),r.a.createElement("p",{className:"register__caption"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",r.a.createElement(_.b,{to:"/sign-in",className:"register__caption register__link"}," \u0412\u043e\u0439\u0442\u0438")))),r.a.createElement(R,{isSucsessed:n,isOpen:a,onClose:o,onOverlayClick:i}))},G=function(e){var t=e.onLogin,n=r.a.useState(""),a=Object(s.a)(n,2),o=a[0],i=a[1],c=r.a.useState(""),l=Object(s.a)(c,2),u=l[0],p=l[1];return r.a.createElement("div",{className:"register"},r.a.createElement("h1",{className:"register__title"},"\u0412\u0445\u043e\u0434"),r.a.createElement("form",{className:"register__form"},r.a.createElement("div",{className:"register__wrapper register__wrapper_type_input"},r.a.createElement("input",{name:"email",type:"email",placeholder:"Email",className:"register__input register__input_type_email",required:"",value:null!==o&&void 0!==o?o:"",onChange:function(e){i(e.target.value)}}),r.a.createElement("span",{className:"register__input-error register__input-error_type_email"})),r.a.createElement("div",{className:"register__wrapper register__wrapper_type_input"},r.a.createElement("input",{name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"register__input register__input_type_password",required:"",value:null!==u&&void 0!==u?u:"",onChange:function(e){p(e.target.value)}}),r.a.createElement("span",{className:"register__input-error register__input-error_type_password"})),r.a.createElement("div",{className:"register__wrapper register__wrapper_type_button"},r.a.createElement("button",{className:"register__button",type:"submit",onClick:function(e){e.preventDefault(),t(u,o)}},"\u0412\u043e\u0439\u0442\u0438"))))},U="https://auth.nomoreparties.co",V=function(e,t){return fetch(e,t).then((function(e){return e.ok?e.json():e.json().then((function(t){var n=t.message||"Request failed",a=new Error(n);throw a.status=e.status,a}))}))},J=function(){function e(t,n){Object(b.a)(this,e),this._form=n,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inputErrorSelector=t.inputErrorSelector,this._inputErrorFrameClass=t.inputErrorFrameClass,this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector))}return Object(O.a)(e,[{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_showInputError",value:function(e){this._form.querySelector("".concat(this._inputErrorSelector).concat(e.name)).textContent=e.validationMessage,e.classList.add(this._inputErrorFrameClass)}},{key:"_hideInputError",value:function(e){this._form.querySelector("".concat(this._inputErrorSelector).concat(e.name)).textContent="",e.classList.remove(this._inputErrorFrameClass)}},{key:"setButtonState",value:function(e){e?this._buttonElement.removeAttribute("disabled"):this._buttonElement.setAttribute("disabled",!0)}},{key:"_preventDefault",value:function(e){e.preventDefault()}},{key:"_setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){e.setButtonState(!1),e._preventDefault(t)})),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._form.checkValidity()?e.setButtonState(!0):e.setButtonState(!1)}))}))}},{key:"resetValidation",value:function(){var e=this;this.setButtonState(!1),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"startValidate",value:function(){this._setEventListeners()}}]),e}(),z=function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){!function(e,t){var n=new J(e,t),a=t.getAttribute("name");k[a]=n,n.startValidate()}(e,t)}))};function H(){H=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new L(a||[]);return r(i,"_invoke",{value:N(e,n,c)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",_="executing",f="completed",h={};function d(){}function v(){}function g(){}var y={};s(y,i,(function(){return this}));var E=Object.getPrototypeOf,b=E&&E(E(x([])));b&&b!==n&&a.call(b,i)&&(y=b);var O=g.prototype=d.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(r,o,i,c){var l=p(e[r],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var o;r(this,"_invoke",{value:function(e,a){function r(){return new t((function(t,r){n(e,a,t,r)}))}return o=o?o.then(r,r):r()}})}function N(t,n,a){var r=m;return function(o,i){if(r===_)throw new Error("Generator is already running");if(r===f){if("throw"===o)throw i;return{value:e,done:!0}}for(a.method=o,a.arg=i;;){var c=a.delegate;if(c){var l=w(c,a);if(l){if(l===h)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===m)throw r=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=_;var s=p(t,n,a);if("normal"===s.type){if(r=a.done?f:"suspendedYield",s.arg===h)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(r=f,a.method="throw",a.arg=s.arg)}}}function w(t,n){var a=n.method,r=t.iterator[a];if(r===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,w(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),h;var o=p(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function x(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return v.prototype=g,r(O,"constructor",{value:g,configurable:!0}),r(g,"constructor",{value:v,configurable:!0}),v.displayName=s(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},C(k.prototype),s(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var i=new k(u(e,n,a,r),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(O),s(O,l,"Generator"),s(O,i,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=x,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(a,r){return c.type="throw",c.arg=t,n.next=a,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;j(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:x(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),h}},t}var M=function(){var e=Object(u.g)(),t=Object(a.useRef)(e),n=Object(a.useState)(!1),o=Object(s.a)(n,2),i=o[0],p=o[1],m=Object(a.useState)(!1),_=Object(s.a)(m,2),d=_[0],b=_[1],O=Object(a.useState)(!1),w=Object(s.a)(O,2),I=w[0],P=w[1],A=Object(a.useState)(!1),T=Object(s.a)(A,2),D=T[0],F=T[1],R=Object(a.useState)(!1),M=Object(s.a)(R,2),Y=M[0],K=M[1],Q=Object(a.useState)(!1),W=Object(s.a)(Q,2),X=W[0],Z=W[1],$=Object(a.useState)(!1),ee=Object(s.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),re=Object(s.a)(ae,2),oe=re[0],ie=re[1],ce=Object(a.useState)([]),le=Object(s.a)(ce,2),se=le[0],ue=le[1],pe=Object(a.useState)([]),me=Object(s.a)(pe,2),_e=me[0],fe=me[1],he=Object(a.useState)({}),de=Object(s.a)(he,2),ve=de[0],ge=de[1],ye=Object(a.useState)(""),Ee=Object(s.a)(ye,2),be=Ee[0],Oe=Ee[1],Ce=Object(a.useState)([]),ke=Object(s.a)(Ce,2),Ne=ke[0],we=ke[1],Se=Object(a.useState)(!1),je=Object(s.a)(Se,2),Le=je[0],xe=je[1],Ie=function(){var t=Object(l.a)(H().mark((function t(n){return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(a=n,V("".concat(U,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})).then((function(t){t&&(ie(!0),Oe(t.data.email),e("/"))})).catch((function(e){console.log(e)})));case 1:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=localStorage.getItem("jwt");e&&Ie(e)}),[oe]),Object(a.useEffect)((function(){t.current("/")}),[]);var Pe=function(e){e.target===e.currentTarget&&Ae()},qe=Object(a.useCallback)((function(e){for(var t in e)e.hasOwnProperty(t)&&e[t]instanceof J&&e[t].resetValidation()}),[]),Ae=Object(a.useCallback)((function(){P(!1),p(!1),b(!1),F(!1),Z(!1),ue([]),fe([]),qe(k),k.delete.setButtonState(!0)}),[P,p,b,F,ue,fe,qe]);function Te(){xe(!0)}function De(){xe(!1)}return Object(a.useEffect)((function(){z(C);var e=function(e){(i||d||I||D||Y)&&"Escape"===e.key&&Ae()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[i,d,I,D,Y,Ae]),Object(a.useEffect)((function(){N.getUserInfo().then((function(e){ge(e)})).catch((function(e){console.log(e)})),N.getInitialCards().then((function(e){we(e)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(h.Provider,{value:ve},r.a.createElement(v.Provider,{value:Ne},r.a.createElement("div",{className:"page__container"},r.a.createElement(f,{email:be,onSignOut:function(){localStorage.removeItem("jwt"),Oe(""),ie(!1),e("/login")}}),r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",element:r.a.createElement(q,{loggedIn:oe,element:g,onEditProfile:function(){p(!0)},onAddPlace:function(){b(!0)},onEditAvatar:function(){P(!0)},onDeletePopup:function(){F(!0)},onSelectDeleteCard:fe,onImageOpen:function(){K(!0)},onCardClick:ue,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===ve._id}));N.setlike(e._id,!t).then((function(t){return we((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){console.log(e)}))}})}),r.a.createElement(u.b,{path:"/sign-up",element:r.a.createElement(B,{onRegister:function(e,t){return function(e,t){return V("".concat(U,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})})}(e,t).then((function(e){return ne(!0),Z(!0),e})).catch((function(e){ne(!1),Z(!0),alert(e)}))},isSucsessed:te,onClose:Ae,isOpen:X,onOverlayClick:Pe})}),r.a.createElement(u.b,{path:"/sign-in",element:r.a.createElement(G,{onLogin:function(t,n){return function(e,t){return V("".concat(U,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})})}(t,n).then((function(t){return t.token?(n=t.token,localStorage.setItem("jwt",n),ie(!0),e("/"),t):void 0;var n})).catch((function(e){return alert(e)}))},onClose:Ae,isOpen:X,isloggedIn:oe,onOverlayClick:Pe})})),oe&&r.a.createElement(y,null)),r.a.createElement(S,{isOpen:i,onClose:Ae,onUpdateUser:function(e){Te(),N.setUserInfo(e).then((function(e){ge(e),Ae()})).catch((function(e){console.log(e)})).finally((function(){De()}))},onLoading:Le,onOverlayClick:Pe}),r.a.createElement(L,{isOpen:d,onClose:Ae,onAddCard:function(e){Te(),N.createCard(e).then((function(e){we([e].concat(Object(c.a)(Ne))),Ae()})).catch((function(e){console.log(e)})).finally((function(){De()}))},onLoading:Le,onOverlayClick:Pe}),r.a.createElement(E,{card:se,onClose:Ae,onOverlayClick:Pe}),r.a.createElement(x,{isOpen:D,onClose:Ae,onDeleteCard:function(e){Te(),N.deleteCard(e._id).then((function(){we((function(t){return t.filter((function(t){return t._id!==e._id}))})),Ae(),k.delete.setButtonState(!0)})).catch((function(e){console.log(e)})).finally((function(){De()}))},card:_e,onLoading:Le,onOverlayClick:Pe}),r.a.createElement(j,{isOpen:I,onClose:Ae,onUpdateAvatar:function(e){Te(),N.changeAvatar(e).then((function(e){ge(e),Ae()})).catch((function(e){console.log(e)})).finally((function(){De()}))},onLoading:Le,onOverlayClick:Pe}))))},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,28)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),o(e),i(e)}))};i.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_.a,null,r.a.createElement(M,null)))),Y()}},[[18,1,2]]]);
//# sourceMappingURL=main.4a58923a.chunk.js.map